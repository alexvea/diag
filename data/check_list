SQL||Check if metrics has no service or host linked||SELECT DISTINCT COUNT(metric_id) FROM centreon_storage.metrics WHERE index_id IS NULL||value;;0;;=||DELETE FROM centreon_storage.metrics WHERE index_id IS NULL;
SQL||Check if hosts is more than license limit||SELECT COUNT(*) FROM centreon.host WHERE host_register='1'||cmd;;nb=`/usr/bin/env grep -Po '(?<="hosts":)[^,]*' /etc/centreon/license.d/epp.license`;if [[ $nb -eq -1 ]]; then /usr/bin/env echo 99999999;else /usr/bin/env echo $nb; fi;;>||https://docs.centreon.com/docs/administration/licenses/#your-epp-license-is-not-valid
SQL||Check if some downtimes are cancelled with no deletion time||SELECT COUNT(*) FROM centreon_storage.downtimes WHERE cancelled = "0" AND deletion_time is NULL||value;;0;;=||DELETE FROM centreon_storage.downtimes WHERE cancelled = "0" AND deletion_time is NULL;
SQL||Check if some service template has itself as parent||SELECT COUNT(*) FROM centreon.service WHERE service_register = '0' and service_id=service_template_model_stm_id||value;;0;;=||Please check with sql request : SELECT service_id, service_template_model_stm_id, service_description FROM centreon.service WHERE service_register = '0' and service_id=service_template_model_stm_id;
SQL||Check if the local admin is blocked||SELECT COUNT(*) FROM centreon.contact WHERE blocking_time IS NOT NULL AND contact_id = 1||value;;0;;=||Please see this link : https://support.centreon.com/hc/en-us/articles/10342991678609--User-is-blocked-error-message-on-Centreon-login-page
SQL||Check if somes hosts are in status ressource but not in configuration||SELECT COUNT(*) FROM centreon_storage.hosts WHERE host_id NOT IN (SELECT host_id FROM centreon.host)||value;;0;;=||DELETE FROM centreon_storage.hosts WHERE host_id NOT IN (SELECT host_id FROM centreon.host);
SQL||Check if somes services are in status ressource but not in configuration (no more host)||SELECT COUNT(*) FROM centreon_storage.services WHERE host_id NOT IN (SELECT host_id FROM centreon.host)||value;;0;;=||DELETE FROM centreon_storage.services WHERE host_id NOT IN (SELECT host_id FROM centreon.host);
SQL||Check if BAs has duplicated downtimes||SELECT COUNT(*) FROM centreon_storage.downtimes AS d JOIN centreon_storage.hosts AS h ON d.host_id = h.host_id WHERE h.name LIKE '%Module_BAM%' AND d.cancelled='0' GROUP BY d.service_id HAVING COUNT(d.downtime_id) > 1;||value;;0;;=||Need KB https://centreonhelp.zendesk.com/agent/tickets/13822
SQL||Check if metrics name has space||SELECT COUNT(*) from centreon_storage.metrics where metric_name regexp "\\s"||value;;0;;=||Please check with sql request : SELECT * from centreon_storage.metrics where metric_name regexp "\\s";
SQL||Check if services has execution time is greater than 50 seconds||SELECT COUNT(*) FROM centreon_storage.services s, centreon_storage.hosts h, centreon_storage.instances i WHERE h.host_id = s.host_id AND h.instance_id = i.instance_id AND s.enabled = '1' AND h.enabled = '1' AND s.execution_time> 50;||value;;0;;=||Please check with sql request : SELECT i.name AS Instance, h.display_name AS Host,s.display_name AS Service,s.execution_time AS Execution_time, s.check_command AS Command FROM centreon_storage.services s, centreon_storage.hosts h, centreon_storage.instances i WHERE h.host_id = s.host_id AND h.instance_id = i.instance_id AND s.enabled = '1' AND h.enabled = '1' AND s.execution_time> 50 ORDER BY s.execution_time DESC;
CMD||Check if the index.html is empty||/usr/bin/env du /usr/share/centreon/www/index.html | /usr/bin/env awk '{ print $1 }'||value;;0;;!=||Please see this link : https://support.centreon.com/hc/en-us/articles/16032432844305-Troubleshooting-Guide-I-get-a-blank-page-when-connecting-to-my-Centreon-GUI
CMD||Check if cbd service is active||/usr/bin/env systemctl status cbd | /usr/bin/env grep -Po '(?<=Active:)[^,]*' | /usr/bin/env awk ' { print $ 1 }'||value;;active;;=||Please check the logs in this directory /var/log/centreon-broker/
CMD||Check if there is Centreon old repositories||if /usr/bin/env grep -q "Debian" /etc/os-release ;then path="/etc/apt/sources.list.d"; else path="/etc/yum.repos.d"; fi && /usr/bin/env grep "https://yum.centreon" $path/centreon* | /usr/bin/env wc -l||value;;0;;=||Please update repositories : https://support.centreon.com/hc/en-us/categories/10341239833105-Repositories
CMD||Check if files from centreon-web were modified||if /usr/bin/env grep -q "Debian" /etc/os-release ;then bin="dpkg"; else bin="rpm"; fi && /usr/bin/env $bin -V centreon-web | /usr/bin/env grep '/usr/share/centreon/www/' | /usr/bin/env grep -v '/install' | /usr/bin/env wc -l||value;;0;;=||Please check with this command : if /usr/bin/env grep -q "Debian" /etc/os-release ;then bin="dpkg"; else bin="rpm"; fi && /usr/bin/env $bin -V centreon-web | /usr/bin/env grep '/usr/share/centreon/www/' | /usr/bin/env grep -v '/install'
CMD||Check how many contacts don't have ACL and are not admin||SELECT COUNT(*) FROM centreon.contact WHERE contact_id NOT IN (SELECT contact_contact_id FROM centreon.acl_group_contacts_relations) AND contact_id NOT IN (SELECT contact_contact_id FROM centreon.contactgroup_contact_relation WHERE contactgroup_cg_id IN (SELECT cg_cg_id FROM centreon.acl_group_contactgroups_relations)) AND contact_admin = '0'||value;;0;;=;;INFO||You have VALUE contacts with no ACLs and without admin rights. Here the sql request to check : SELECT contact_name FROM centreon.contact WHERE contact_id NOT IT (SELECT contact_contact_id FROM centreon.acl_group_contacts_relations) AND contact_id NOT IN (SELECT contact_contact_id FROM centreon.contactgroup_contact_relation WHERE contactgroup_cg_id IN (SELECT cg_cg_id FROM centreon.acl_group_contactgroups_relations)) AND contact_admin = '0';
